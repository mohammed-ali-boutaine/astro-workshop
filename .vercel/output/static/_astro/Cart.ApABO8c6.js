import{j as e,d as o,i as m,r as u,c as h,a as x}from"./cart.BILLagcO.js";import{r as l}from"./index.BVOCwoKb.js";function j(a,n,s){let t=new Set(n).add(void 0);return a.listen((c,i,r)=>{t.has(r)&&s(c,i,r)})}let d=(a,n)=>s=>{a.current!==s&&(a.current=s,n())};function N(a,{keys:n,deps:s=[a,n]}={}){let t=l.useRef();t.current=a.get();let c=l.useCallback(r=>(d(t,r)(a.value),n?.length>0?j(a,n,d(t,r)):a.listen(d(t,r))),s),i=()=>t.current;return l.useSyncExternalStore(c,i,i)}function b(){const a=N(x),n=a.reduce((t,c)=>t+c.item.price*c.quantity,0);l.useEffect(()=>{const t=new CustomEvent("cartUpdated",{detail:{count:a.length}});window.dispatchEvent(t);const c=document.getElementById("cart-count");c&&(c.textContent=a.length.toString())},[a]);const s=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);return a.length===0?e.jsxs("div",{className:"cart-container fixed-cart",children:[e.jsxs("div",{className:"cart-header",children:[e.jsx("h2",{className:"cart-title",children:"ğŸ›’ Your Cart"}),e.jsx("button",{className:"close-cart-btn",onClick:()=>{document.getElementById("cart-panel")?.classList.remove("open")},children:"Ã—"})]}),e.jsxs("div",{className:"empty-cart",children:[e.jsx("p",{children:"Your cart is empty"}),e.jsx("span",{className:"empty-cart-icon",children:"ğŸ›ï¸"})]})]}):e.jsxs("div",{className:"cart-container fixed-cart",children:[e.jsxs("div",{className:"cart-header",children:[e.jsx("h2",{className:"cart-title",children:"ğŸ›’ Your Cart"}),e.jsx("button",{className:"close-cart-btn",onClick:()=>{document.getElementById("cart-panel")?.classList.remove("open")},children:"Ã—"})]}),e.jsx("div",{className:"cart-items",children:a.map(t=>e.jsxs("div",{className:"cart-item",children:[e.jsxs("div",{className:"item-info",children:[e.jsx("h4",{className:"item-name",children:t.item.title}),e.jsx("p",{className:"item-price",children:s(t.item.price)})]}),e.jsxs("div",{className:"quantity-controls",children:[e.jsx("button",{className:"quantity-btn decrease",onClick:()=>o(t.id),"aria-label":"Decrease quantity",children:"âˆ’"}),e.jsx("span",{className:"quantity",children:t.quantity}),e.jsx("button",{className:"quantity-btn increase",onClick:()=>m(t.id),"aria-label":"Increase quantity",children:"+"})]}),e.jsx("div",{className:"item-total",children:s(t.item.price*t.quantity)}),e.jsx("button",{className:"remove-btn",onClick:()=>u(t.id),"aria-label":`Remove ${t.item.title} from cart`,children:"ğŸ—‘ï¸"})]},t.id))}),e.jsxs("div",{className:"cart-summary",children:[e.jsxs("div",{className:"total-row",children:[e.jsx("span",{className:"total-label",children:"Total:"}),e.jsx("span",{className:"total-amount",children:s(n)})]}),e.jsx("button",{onClick:h,className:"clear-cart-btn",children:"Clear Cart"})]})]})}export{b as default};
